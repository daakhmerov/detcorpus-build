# ДЕТКОРПУС

Корпус русской прозы для детей и юношества XX—XXI вв. (ДетКорпус) —
это аннотированный корпус произведений русской детской литературы,
написанных в период 1920-х — 2020-х гг. Корпус создан как инструмент
для исторических, типологических и количественных исследований в
области детской литературы. Представленный датасет включает
метаданные, а также автоматически сгенерированную грамматическую и
тематическую аннотацию к текстам произведений, но не включает самих
текстов произведений в оригинальной форме. Формат и набор данных,
включенных в датасет, подобран таким образом, чтобы на этом материале
можно было воспроизвести большую часть статистических расчетов,
сделанных на исходных текстах корпуса, а также проводить новые
количественные исследования, опирающиеся на грамматическую и
лексическую статистику.

Онлайн-интерфейс для поиска по исходным текстам корпуса свободно
доступен для исследователей, библиотекарей, учителей и всех
интересующихся детской литературой по адресу
http://detcorpus.ru. Интерфейс позволяет осуществлять поиск по
отдельным словам и по сложным запросам, знакомиться с контекстами
употребления поискового слова (фрагменты до 1000 слов), вычислять
частотную статистику по текстам и метаданным и строить выборки
примеров по комбинации критериев. Данные, содержащиеся в настоящем
датасете, соответствуют данным, отображаемым при поиске в корпусе на
http://detcorpus.ru.

При цитировании результатов, полученных при поиске по корпусу на
http://detcorpus.ru, мы рекомендуем указывать ссылку на текущую версию
настоящего датасета. Такое цитирование позволит в дальнейшем проверить
и при необходимости воспроизвести количественные результаты исследования.

## Выборка

Деткорпус включает 2097 прозаических произведений, написанных на
русском языке в период с 1920-х по 2020-е годы и адресованных детям и
подросткам. Корпус делится на две части: подкорпус художественной
литературы (2054 произведений) и подкорпус нон-фикшн (63).

Корпус отражает произведения, выходившие отдельными книжными изданиями
или включенные в сборники. Произведения, публиковавшиеся только в
периодических изданиях, в корпус не включены. Выборка произведений
для включения в корпус строится на основании библиографических
источников, маркирующих издания как адресованные детям и подросткам.
Для советского периода основанием теоретической выборки выступает серия
указателей «Детская литература» (1918—1984) И. И. Старцева и его
последователей. Выборка по постсоветской текущей библиографии строится
с использованием различных библиотечных и издательских каталогов.

В настоящий момент выборка включенных в корпус произведений не
является сбалансированной и не может рассматриваться как
репрезентативная по отношению к генеральной совокупности произведений
детской литературы означенного периода. Основным ограничением,
влияющим на состав выборки, является доступность цифровой копии. 
Корпус постоянно пополняется, ведется работа по улучшению
репрезентативности и балансировке корпуса.

## Метаданные

Все тексты корпуса сопровождаются метаданными об авторе и издании.
Сведения об авторе включают минимальную биографическую информацию:
имя, настоящее имя (если произведение опубликовано под псевдонимом),
годы жизни, пол.

Для каждого текста даны библиографические сведения о двух изданиях:
первом книжном издании произведения, а также издании-источнике
электронной копии, включенной в корпус. Для небольшой части случаев
указывается первая журнальная публикация вместо книжной. Это
характерно для ситуаций, когда первое книжное издание слишком далеко
отстоит по дате от первой журнальной публикации. Включение сведений о
первом издании позволяет привязать произведение на хронологической оси
к моменту, близкому к созданию произведения и/или его первой
публикации. Эту привязку можно использовать в том числе в
статистическом анализе и при визуализации данных корпуса.

Источниками метаданных служат преимущественно marc-файлы центральных
библиотек, а также метаданные цифровых копий. Метаданные корпуса
организованы в таблицу в файле metadata.tab.

Таблица **metadata.tab** содержит следующие колонки:

* author, realname, author_birth_year, author_death_year, author_sex — 
  информация об авторе или авторах;
* id — название файла в корпусе, служит для связи текста с 
  метаданными произведения в таблице; 
* title — название произведения; 
* year — год публикации первой книжной или, при её отсутствии,
  журнальной публикации. Нормализованное значение: удалены текстовые
  примечания («ценз.», «обл.»), для продолжающихся изданий (журналы,
  многочастные издания) указан год окончания публикации, для
  многотомных — год издания конкретного тома;
* edition_year — год публикации источника корпусной копии; 
* firstprint_description — краткое библиографическое описание первого
  издания;
* edition — краткое библиографическое описание источника корпусной копии;
* genre — жанровая метка, если произведению присвоено более одной
  метки, они указываются через двоеточие; расшифровку значения меток
  см. ниже.

В Деткорпусе действуют **жанровые метки** (колонка «genre»). Жанровые
метки не имеют цели строгого дефинитивного разграничения произведений,
и служат практическим целям тематической сортировки или изучения
«формульных» текстов. Назначая произведениям жанровые метки мы
ориентируемся на исследовательскую, издательскую (серия,
подзаголовок), библиотечную (каталогизация) практики жанрового
определения, учитывая также авторскую и читательскую
(онлайн-сообщества) оптики. К моменту первой публикации корпуса
присвоение меток — «ручной» процесс, и его результаты до известной
степени субъективны, хотя и учитывают мнения экспертов и практиков.

Расшифровка значения жанровых меток:

* realism — Реалистическая проза, охватывает советскую и постсоветскую
  детскую литературу.
* detective — Детский детектив, произведения преимущественно 1990-х —
  2000-х гг. 
* fantasy — Фантастика, тексты, содержащие фантастические сюжетные
  элементы. 
* skazka — Литературная сказка, советский и постсоветский период.
* love — Любовные повести, современный роман для девочек (с 2000-х
  гг.). 
* horror — Ужастики, подкорпус страшной детской книги (с 2000-х гг.). 
* school — Школьная повесть, произведения, объединенные школьной
  топикой. 
* animalistic — Зообеллетристика, проза о животных, произведения, 
  в которых главные герои и мотивы связаны с животным миром.
* biography — Биографическая проза, основу сюжета составляет биография
  исторического лица.
* adventure — Приключенческие повести, произведения с приключенческой
  фабулой.
* history — Историческая беллетристика, литературные тексты об
  исторических событиях.
* nonfiction — Нон-фикшн, научно-популярная, просветительская и
  рекомендательная литература для детей.
* encyclopedia — Энциклопедии для детей.
* girls — Консультационные книги для девочек.


## Аннотированные тексты произведений

Для публикации Деткорпуса в качестве датасета аннотированные тексты
произведений представлены в виде списков лексем с «перемешанной»
последовательностью предложений. Такая презентация текста обеспечивает
требование к воспроизводимости результата исследования: сохраняет как
лексические, так и синтаксические конструкции, однако не позволяет
полностью воспроизвести оригинальный текст. 

Аннотированные тексты произведений представлены в виде отдельных
файлов во включенном в датасет архиве texts.zip. Имена файлов
соответствуют идентификаторам, указанным в колонке id в таблице
метаданных. Файлы с расширением .vert представляют собой текстовые
файлы в кодировке UTF-8. В файлах содержится два типа строк: 
* теги, разграничивающие структурные элементы текста (документ,
  фрагмент, предложение) и их атрибуты (метаданные), такие строки
  начинаются с символа <;
* табличные данные, содержащие словоформу, лемму, частеречный тег,
  грамматическую информацию в формате значений, разделенных символов
  табуляции (tab separated values).
  
Общая структура каждого .vert-файла следует обозначенной ниже схеме:

```
<doc id="идентификатор_документа" ... >
<f id=1>
<s>
Пытлив  пытливый        A               ед|кр|муж
и       и       CONJ
деятелен        деятельный      A               ед|кр|муж
...»    ...»    c
</s>
. . .
</f>
</f id=2>
. . .
</f>
</doc>
```

Расшифровка значений тегов: 

* <doc> — документ корпуса, в качестве атрибутов тега указываются все
  метаданные текста (произведения) в формате key="value".
* <f id=N> — 500-словный фрагмент произведения, фрагменты используются
  при построении тематической модели LDA (подробнее см. ниже), а также
  при рандомизации данных — предложения документа «перемешиваются» в
  случайном порядке в рамках одного фрагмента.
* <s> — предложение, может не совпадать с границами синтаксических
  предложений в тексте, выделены автоматически с помощью программы
  MyStem (https://yandex.ru/dev/mystem/).

Последовательность полей в строках с данными по токенам отдельным: 

* словоформа;
* лемма;
* частеречный тег;
* список постоянных грамматических признаков лексемы (значения,
  разделенные символом |);
* список значений изменяемых грамматических признаков словоформы
  (значения, разделенные символом |).
  
Вся грамматическая информация вычислена автоматически с помощью MyStem
с использованием встроенного механизма снятия омонимии. Расшифровку
обозначений граммем
см. https://yandex.ru/dev/mystem/doc/grammemes-values.html


## Тематическое моделирование (LDA)

В Деткорпусе реализован поиск по фрагментам произведений, содержащим
определенную тему. Тематика определяется автоматически с помощью
алгоритма тематического моделирования LDA. В связи с тем, что корпус
регулярно обновляется и пополняется, результаты работы алгоритма
(списки тем) будут различаться для каждой новой публикации корпуса,
хотя часть тем демонстрирует некоторую устойчивость. 

Тематическое моделирование проводится для наборов из сотни, двух
сотен, и трёх сотен тем с помощью программы mallet
(http://mallet.cs.umass.edu/index.php). В датасете в каталоге lda
представлены пять типов файлов для каждого из этих наборов:

**labels{100,200,300}.txt** — пронумерованный список тем с выводом
первых трёх по частотности слов (название темы). Темы в списке
отсортированы по убыванию размера (общее количество токенов,
отнесенных к теме в корпусе). В первой колонке содержится порядковый
номер темы по убыванию размера (совпадает с нумерацией тем при поиске
в корпусе). Во второй колонке — номер темы, присвоенный автоматически
при построении модели, совпадает с номером темы, используемым во всех
остальных файлах далее. В третьей колонке — три наиболее характерные
слова темы (автоматическая метка темы), совпадает с меткой темы при
поиске в онлайн-корпусе.

**summary{100,200,300}.txt** — расшифровка темы: пронумерованный
список тем с первыми пятьюдесятью по частотности словами в ней.

**diag{100,200,300}.xml** — диагностическая информация по каждой теме
в формате, предлагаемом утилитой mallet.

**doc-topics{100,200,300}.txt** — доля тем в каждом фрагменте всех
произведений корпуса. Последовательность колонок: 

* порядковый номер документа (фрагмента);
* идентификатор документа (совпадает с идентификатором в метаданных и
  в именах файлов);
* порядковый номер фрагмента в произведении;
* Далее список пар: 
  * номер темы (присвоенный автоматически при построении модели,
    вторая колонка в файле labels.txt);
  * доля темы во фрагменте. 
Приводятся данные только по темам, доля которых в указанном фрагменте
превышает 5%.

**topic-phrase.xml** — список частотных слов и биграмм в каждой теме,
в формате mallet.

## Историческая справка

Формирование корпуса началось в 2017 г. Первоначальную основу корпуса
составила небольшая выборка из сотни школьных повестей 1950-х — 1980-х
гг. Впоследствии выборка текстов в корпусе последовательно расширялась
как в отношении периода создания произведений, так и жанров.

В 2018 году был опубликован первый релиз Деткорпуса, сформированный
преимущественно на основе литературы 1950-х — 1980-х реалистического
жанра, включавший около 500 произведений. В эту версию корпуса вошли
произведения, для которых были доступны цифровые копии из свободных
источников. Для аннотации Деткорпуса была создана библиографическая
база данных, которая отражает сведения об изданиях и авторах. В
октябре 2018 года поисковый интерфейс корпуса перенесен на сайт
http://detcorpus.ru. С тех пор корпус регулярно пополняется и
обновляется с периодичностью один-два раза в год.

## Участники проекта и благодарности

Публикация корпуса — результат коллективных усилий многих людей и
поддержки различных организаций. Концепцию корпуса, принципы
построения выборки и аннотации текстов сформулировал Кирилл
Маслинский, он же занимается организацией и развитием цифровой
инфраструктуры корпуса. Текущую библиографическую поддержку и
консультирование ведет главный библиограф корпуса Любовь Алейник, она
же составила первоначальное «ядро» коллекции и сформировала
постсоветский подкорпус. Евгения Лекаревич выполняет основную работу
по пополнению и балансировке корпуса, аннотированию метаданных,
исправлению ошибок и подготовке корпуса к публикации.

Качественный переход корпуса из узкой тематической коллекции в большой
и достаточно репрезентативный корпус детской литературы стал
возможен благодаря деятельному энтузиазму участников студенческого
проекта по развитию корпуса НИУ ВШЭ Санкт-Петербург Екатерины
Додоновой, Юлии Кожевниковой и Никиты Никифорова, которые значительно
пополнили корпус текстами на раннем этапе его развития. Наши
коллеги-исследователи Катя Сенне и Лора Тибонье помогли сформировать
ряд тематических подкорпусов. Подробнее об участниках проекта и их
вкладе см.  http://detcorpus.ru/pages/about.html.

Институт русской литературы (Пушкинский Дом) РАН оказывает огромную
организационную поддержку проекту, а также предоставляет хостинг и
вычислительные ресурсы для работы корпуса. Сотрудничество и поддержка
со стороны Российской государственной детской библиотеки позволяют
пополнять корпус, в том числе текстами редких и труднодоступных
изданий. Мы благодарны Валентину Головину и Илье Гавришину,
поддерживающему нас от лица этих организаций. 
